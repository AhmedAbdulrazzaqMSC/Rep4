
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>REMS – Reefer Equipment Maintenance System</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .banner {
      background: #ffcc00;
      padding: 10px;
      font-weight: bold;
    }
    form {
      max-width: 1000px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    h2 {
      grid-column: 1 / 3;
    }
    label {
      font-weight: bold;
    }
    input, select, textarea, button {
      padding: 8px;
      width: 100%;
      box-sizing: border-box;
    }
    button {
      background-color: #007BFF;
      color: white;
      border: none;
      padding: 10px;
      cursor: pointer;
      border-radius: 4px;
    }
    .full-width {
      grid-column: 1 / 3;
    }
    fieldset {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
      grid-column: 1 / 3;
    }
    .readonly {
      background-color: #f4f4f4;
    }
    @media only screen and (max-width: 767px) {
      form {
        grid-template-columns: 1fr;
      }
      .full-width {
        grid-column: 1;
      }
    }
  </style>
</head>
<body>
  <div class="banner">✅ Dynamic Job Form Loaded</div>

  <form id="repairForm">
    <h2>Technician Repair Form</h2>

    <label>CONTAINERNR</label><input type="text" name="containernr" />
    <label>DATUM</label><input type="date" name="datum" />
    <label>NAAM</label><input type="text" name="naam" />

    <div id="jobContainer" class="full-width"></div>
    <button type="button" onclick="addJob()">+ Add Job</button>

    <button type="submit" class="full-width">Submit</button>
  </form>

  <script>
    const jobData = [
      { job_description: "Fan - Replace", job_code: "A011A", part_number: "38-00557-00", part_description: "Fan, Evaporator", labour_hours: 0.5 },
      { job_description: "Controller - Replace", job_code: "A018A", part_number: "12-56012", part_description: "Controller ML3, Green Label, Repaired", labour_hours: 1.0 },
      { job_description: "Humidity Sensor - Replace", job_code: "A037A", part_number: "76-66694-00", part_description: "Sensor, Humidity W/Bracket (HS)", labour_hours: 1.25 },
  {
    "job_description": "Coil Assembly Condenser - Replace",
    "job_code": "B075A",
    "part_number": "81-04203-25",
    "part_description": "Condenser Coil (ALU/ALU)",
    "labour_hours": 4.0
  },
  {
    "job_description": "Coil Assembly Condenser - Replace",
    "job_code": "B075A",
    "part_number": "69NT43-202-20PK5",
    "part_description": "Condenser Coil, 4-Row",
    "labour_hours": 4.0
  },
  {
    "job_description": "Coil Assembly Condenser - Replace",
    "job_code": "B075A",
    "part_number": "81-04203-21",
    "part_description": "Condenser Coil, Assembly (excl all related jobs)",
    "labour_hours": 4.0
  },
  {
    "job_description": "Compressor, complete (with motor) - Replace",
    "job_code": "B064A",
    "part_number": "18-10129-22",
    "part_description": "COMPRESSOR, THINLINE",
    "labour_hours": 3.25
  },
  {
    "job_description": "Evaporator Fan Motor  - Replace",
    "job_code": "A030A",
    "part_number": "54-00742-00",
    "part_description": "Motor, evaporator",
    "labour_hours": 2.0
  },
  {
    "job_description": "Compressor, complete (with motor) - Replace",
    "job_code": "B064A",
    "part_number": "18-10178-22",
    "part_description": "COMPRESSOR SCROLL PRIMELINE",
    "labour_hours": 2.0
  },
  {
    "job_description": "Condenser fan motor capacitor - Replace",
    "job_code": "A005A",
    "part_number": "22-50088-02",
    "part_description": "Capacitor, CFM, 15uF",
    "labour_hours": 1.5
  },
  {
    "job_description": "Condenser fan motor capacitor - Replace",
    "job_code": "A005A",
    "part_number": "22-50088-00",
    "part_description": "Capacitor, EF, 20uF (High Speed)",
    "labour_hours": 1.5
  },
  {
    "job_description": "Humidity Sensor  - Replace",
    "job_code": "A037A",
    "part_number": "76-66694-00",
    "part_description": "Sensor, Humidity W/Bracket  (HS)",
    "labour_hours": 1.25
  },
  {
    "job_description": "Controller  - Replace",
    "job_code": "A018A",
    "part_number": "12-56009",
    "part_description": "Controller ML3, Yellow Label, Repaired",
    "labour_hours": 1.0
  },
  {
    "job_description": "Controller  - Replace",
    "job_code": "A018A",
    "part_number": "12-56012",
    "part_description": "Controller ML3, Green Label, Repaired",
    "labour_hours": 1.0
  },
  {
    "job_description": "Circuit breaker, 460 V  - Replace",
    "job_code": "A008A",
    "part_number": "66U1-7842-13",
    "part_description": "Breaker, Circuit - 460 vac, 25 Amp, (CB1)",
    "labour_hours": 1.0
  },
  {
    "job_description": "Terminal Mounting Kit Compressor - 5 kit - Replace",
    "job_code": "B069A",
    "part_number": "76-50210-00",
    "part_description": "Kit, Compressor Terminal Wiring (Single Voltage)",
    "labour_hours": 1.0
  },
  {
    "job_description": "Compressor contactor   - Replace",
    "job_code": "A013A",
    "part_number": "10-00431-07",
    "part_description": "Contactor, 30A",
    "labour_hours": 0.75
  },
  {
    "job_description": "Control sensor (supply air)  - Replace",
    "job_code": "A058A",
    "part_number": "12-00395-01SV",
    "part_description": "Sensor, Supply, Assembly (SRS & STS)",
    "labour_hours": 0.75
  },
  {
    "job_description": "Oil charge - Replace",
    "job_code": "B074A",
    "part_number": "07-00292-00",
    "part_description": "SW20 Compressor Oil, Castrol Icematic (Quart) (1 liter)",
    "labour_hours": 0.5
  },
  {
    "job_description": "Drier filter  - Replace",
    "job_code": "B087A",
    "part_number": "14-00464-20",
    "part_description": "Filter Drier, with O-Rings",
    "labour_hours": 0.5
  },
  {
    "job_description": "High-pressure cut-out  - Replace",
    "job_code": "B094A",
    "part_number": "12-00309-06",
    "part_description": "Switch, High Pressure (HPS)",
    "labour_hours": 0.5
  },
  {
    "job_description": "Cable, 460 V  - Replace",
    "job_code": "A002A",
    "part_number": "22-66651-20",
    "part_description": "Cable MSC ContainerFlex FG7OK 4G4 11awg (per meter)",
    "labour_hours": 0.5
  },
  {
    "job_description": "Cable, 460 V  - Splice",
    "job_code": "A002X",
    "part_number": "22-50463-00PK50",
    "part_description": "SPLICE KIT FAST III",
    "labour_hours": 0.5
  },
  {
    "job_description": "Cable, 460 V  - Splice",
    "job_code": "A002X",
    "part_number": "22-50463-00PK5",
    "part_description": "SPLICE KIT FAST III",
    "labour_hours": 0.5
  },
  {
    "job_description": "Cable, 460 V  - Replace",
    "job_code": "A002A",
    "part_number": "22-66654-20",
    "part_description": "Cable MSC ContainerFlex FG7OK 4G4 11awg (per meter)",
    "labour_hours": 0.5
  },
  {
    "job_description": "Power Plug (Complete) Male - Replace",
    "job_code": "A001A",
    "part_number": "22-02378-00PK10",
    "part_description": "Plug, Power",
    "labour_hours": 0.5
  },
  {
    "job_description": "Transformer, Current Sensing - Replace",
    "job_code": "A028A",
    "part_number": "10-00439-00",
    "part_description": "Transformer, Current Sensing (CS)",
    "labour_hours": 0.5
  },
  {
    "job_description": "Ambient sensor  - Replace",
    "job_code": "A053A",
    "part_number": "12-00495-02SV",
    "part_description": "Sensor, Ambient / Defrost kit (AMBS / DTS)",
    "labour_hours": 0.5
  },
  {
    "job_description": "Power Plug (Complete) Male - Replace",
    "job_code": "A001A",
    "part_number": "818559A",
    "part_description": "Power plug",
    "labour_hours": 0.5
  },
  {
    "job_description": "Cable, 460 V  - Replace",
    "job_code": "A002A",
    "part_number": "818831A",
    "part_description": "Cable MSC ContainerFlex FG7OK 4G4 11awg (per meter)",
    "labour_hours": 0.5
  },
  {
    "job_description": "Cable, 460 V  - Splice",
    "job_code": "A002X",
    "part_number": "818260A",
    "part_description": "Splice kit, AKS to NSK",
    "labour_hours": 0.5
  },
  {
    "job_description": "Fan  - Replace",
    "job_code": "A011A",
    "part_number": "38-00557-00",
    "part_description": "Fan, Evaporator",
    "labour_hours": 0.5
  },
  {
    "job_description": "Evaporation  coil defrost temperature sensor - Replace",
    "job_code": "A051A",
    "part_number": "12-00495-02SV",
    "part_description": "Sensor, Ambient / Defrost kit (AMBS / DTS)",
    "labour_hours": 0.5
  },
  {
    "job_description": "Transformer, Current Sensing - Replace",
    "job_code": "A028A",
    "part_number": "10-00439-02",
    "part_description": "Transformer, Current Sensing (CS)",
    "labour_hours": 0.5
  },
  {
    "job_description": "Controller Key Pad  - Replace",
    "job_code": "A039A",
    "part_number": "79-66669-05",
    "part_description": "Keypad Assy",
    "labour_hours": 0.5
  },
  {
    "job_description": "Temperature display  - Replace",
    "job_code": "A029A",
    "part_number": "12-00433-00RB",
    "part_description": "Module, Display (Repaired)",
    "labour_hours": 0.5
  },
  {
    "job_description": "Controller Key Pad  - Replace",
    "job_code": "A039A",
    "part_number": "79-66669-04",
    "part_description": "Keypad, Assembly",
    "labour_hours": 0.5
  },
  {
    "job_description": "Fuse  - Replace",
    "job_code": "A034A",
    "part_number": "22-02336-08",
    "part_description": "Fuse, 7.5 Amp",
    "labour_hours": 0.25
  },
  {
    "job_description": "DataCorder Battery Pack   - Replace",
    "job_code": "A041A",
    "part_number": "30-50377-00",
    "part_description": "Controller/DataCORDER Module Standard Battery Holder with Connector",
    "labour_hours": 0.25
  },
  {
    "job_description": "Valve Suction Modulation - Replace",
    "job_code": "B123A",
    "part_number": "14-00353-20",
    "part_description": "Piston and Motor Assembly",
    "labour_hours": 0.25
  },
  {
    "job_description": "Service valve gasket   - Replace",
    "job_code": "B110A",
    "part_number": "17-10811-05",
    "part_description": "Gasket, Service Valve (2 Bolt) (excl all related jobs)",
    "labour_hours": 0.25
  }
];

    let jobIndex = 0;

    function addJob() {
      jobIndex++;
      const container = document.getElementById("jobContainer");
      const datalistId = "jobList_" + jobIndex;

      const fieldset = document.createElement("fieldset");
      fieldset.innerHTML = `
        <legend>Job ${jobIndex}</legend>
        <label>Job Description</label>
        <input type="text" list="${datalistId}" oninput="handleJobSelect(this, ${jobIndex})">
        <datalist id="${datalistId}">
          ${jobData.map(j => `<option value="${j.job_description}">`).join("")}
        </datalist>
        <label>Job Code</label>
        <input type="text" id="jobCode_${jobIndex}" class="readonly" readonly>
        <label>Part Number</label>
        <input type="text" id="partNumber_${jobIndex}" class="readonly" readonly>
        <label>Part Description</label>
        <input type="text" id="partDesc_${jobIndex}" class="readonly" readonly>
        <label>Quantity</label>
        <input type="text" name="quantity_${jobIndex}">
        <label>Old Serial Number</label>
        <input type="text" name="serial_old_${jobIndex}">
        <label>New Serial Number</label>
        <input type="text" name="serial_new_${jobIndex}">
        <input type="hidden" id="labour_${jobIndex}">
      `;
      container.appendChild(fieldset);
    }

    function handleJobSelect(inputEl, index) {
      const selected = inputEl.value;
      const match = jobData.find(j => j.job_description === selected);
      document.getElementById("jobCode_" + index).value = match?.job_code || '';
      document.getElementById("partNumber_" + index).value = match?.part_number || '';
      document.getElementById("partDesc_" + index).value = match?.part_description || '';
      document.getElementById("labour_" + index).value = match?.labour_hours || '';
    }

    window.onload = () => addJob();
  </script>
</body>
</html>
